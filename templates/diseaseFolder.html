<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chest Detect System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="static/css/folder.css">
</head>

<body>
    <header class="p-3 mb-3 border-bottom">
        <div class="headAll">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none"></a>
            <div class="system"><a>胸腔辨識系統</a></div>
            <ul class="drop-down-menu ">
              <li><a class="nav-link dropdown-toggle show" href="{{ url_for('all.all') }}" data-bs-toggle="dropdown"
                  aria-expanded="true">病患總覽</a></li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle show" href="{{ url_for('diseaseAll.diseaseAll') }}"
                  data-bs-toggle="dropdown" aria-expanded="true">疾病分類</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle show" href="{{ url_for('detect.detect') }}" data-bs-toggle="dropdown"
                  aria-expanded="true">疾病辨識</a>
              </li>
              <li><a class="nav-link dropdown-toggle show" href="{{ url_for('about.about') }}" data-bs-toggle="dropdown"
                  aria-expanded="true">醫院公告</a></li>
            </ul>
            <div class="message-logout">
              {% if username %}
              <div class="welcome-message">
                <span>{{ username }}，您好！</span>
              </div>
              {% endif %}
              <div class="logout">
                <a href="{{ url_for('logout.logout') }}" class="btn btn-danger">登出</a>
              </div>
            </div>
          </div>
        </div>
      </header>

    <main>
        <div class="container">
            <div class="folder-container" id="folder-container">
                <div class="folder">
                    <!-- 連結到 disease.html 並傳遞 diseaseName -->
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName='Atelectasis') }}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Atelectasis</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Cardiomegaly")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Cardiomegaly</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Consolidation")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Consolidation</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Edema")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Edema</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Effusion")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Effusion</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Emphysema")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Emphysema</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Fibrosis")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Fibrosis</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Hernia")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Hernia</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Infiltration")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Infiltration</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Mass")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Mass</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="No Finding")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>No Finding</p>
                    </a>
                </div>
                <div class="folder">
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Nodule")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Nodule</p>
                    </a>
                </div> 
                <div class="folder">                   
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Pleural_Thickening")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Pleural_Thickening</p>
                    </a>
                </div> 
                <div class="folder">  
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Pneumonia")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Pneumonia</p>
                    </a>
                </div>
                <div class="folder">               
                    <a href="{{ url_for('diseaseName.diseaseName', diseaseName="Pneumothorax")}}">
                        <img src="static/assets/R.png" alt="folder image">
                        <p>Pneumothorax</p>
                    </a> 
                </div>
            </div>
        </div>
    </main>

    <footer class="py-5">
        <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
            <p id="foot">© 2024 Hsin-Mei Chang and Ting-Yu Ye, National Kaohsiung Normal University, Taiwan, Inc. All
                rights
                reserved.</p>
        </div>
    </footer>

    <script>
        const addFolderBtn = document.getElementById('add-folder-btn');
        const folderContainer = document.getElementById('folder-container');

        addFolderBtn.addEventListener('click', () => {
            const folderName = prompt("請輸入資料夾名稱：");

            if (folderName) {
                // 發送資料夾名稱到後端，將其儲存到資料庫
                fetch('/add_folder', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ id_card_number: folderName })  // 以 JSON 格式傳送資料夾名稱作為 id card number
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.message === '成功新增資料夾') {
                            // 成功儲存後，將資料夾動態添加到頁面
                            const newFolder = document.createElement('div');
                            newFolder.classList.add('folder');

                            const folderLink = document.createElement('a');
                            folderLink.href = `/patient/${folderName}`;  // 根據資料夾名稱設置對應頁面的連結

                            const folderImage = document.createElement('img');
                            folderImage.src = 'static/assets/R.png';
                            folderImage.alt = '資料夾圖片';

                            const folderText = document.createElement('p');
                            folderText.innerText = folderName;

                            folderLink.appendChild(folderImage);
                            folderLink.appendChild(folderText);
                            newFolder.appendChild(folderLink);

                            folderContainer.appendChild(newFolder);
                        } else {
                            alert('新增資料夾失敗');
                        }
                    })
                    .catch(error => {
                        console.error('錯誤:', error);
                        alert('新增資料夾時發生錯誤');
                    });
            }
        });
    </script>


</body>

</html>